var e={};Object.defineProperty(e,"__esModule",{value:!0}),e.cambioRuta=void 0;var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.portadaLogin=void 0;var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.deletePost=o.feedUpdate=o.addNoteOnSubmit=o.signOutSubmit=o.logInOnSubmit=o.loginWithGoogle=o.signInOnSubmit=o.changeHash=void 0;var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.addNote=a.signOut=a.saveUsers=a.googleLogin=a.logIn=a.signIn=void 0;a.signIn=(e,t)=>firebase.auth().createUserWithEmailAndPassword(e,t);a.logIn=(e,t)=>firebase.auth().signInWithEmailAndPassword(e,t);a.googleLogin=()=>{const e=new firebase.auth.GoogleAuthProvider;return firebase.auth().signInWithPopup(e)};const n=firebase.firestore();a.saveUsers=()=>{const e=firebase.auth().currentUser;n.collection("users").doc(e.uid).set({user:e.displayName,avatar:e.photoURL,uid:e.uid,email:e.email})};a.signOut=()=>firebase.auth().signOut();a.addNote=e=>{const t=firebase.auth().currentUser;n.collection("notes").add({user:t.displayName,email:t.email,date:firebase.firestore.Timestamp.fromDate(new Date),textNewNote:e}).then((e=>{console.log(e)})).catch((e=>{console.log(e)}))};const s=e=>{location.hash=e};o.changeHash=s;o.signInOnSubmit=()=>{const e=document.getElementById("email-registro").value,t=document.getElementById("password-registro").value;(0,a.signIn)(e,t).then((()=>alert("Datos Guardados")),s("#/")).catch((e=>{const t=e.message;alert(t)}))};o.loginWithGoogle=()=>{(0,a.googleLogin)().then((()=>{s("/home"),(0,a.saveUsers)()}))};o.logInOnSubmit=()=>{const e=document.getElementById("email-login").value,t=document.getElementById("password-login").value;(0,a.logIn)(e,t).then((()=>{(0,a.saveUsers)(),s("/home")})).catch((e=>{const t=e.message;alert(t)}))};o.signOutSubmit=()=>{(0,a.signOut)().then((()=>{alert("Cerrando sesión"),s("#")})).catch((e=>{const t=e.message;alert(t)}))};o.addNoteOnSubmit=e=>{(0,a.addNote)(e),console.log(e)};o.feedUpdate=e=>{firebase.firestore().collection("notes").orderBy("date").onSnapshot(e)};o.deletePost=e=>{firebase.firestore().collection("notes").doc(e).delete()};t.portadaLogin=()=>{const e=document.createElement("section");e.innerHTML='\n  <div class="portada-header-container">\n    <h1 class="portada-titulo">Naturópolis</h1>\n    <p class="portada-texto">\n      ¡Bienvenida! Haz login para acceder a tu muro.\n    </p>\n    <img src="../Assets/imagenes/Naturopolis-logo-portada.svg" alt="logo" class="logo-portada">\n  </div>\n  <div class="formulario-login-container" id="formulario-login-container">\n  <h2 class="registro-titulo">Haz login</h2>\n    <form action="#" method="post" id="form-login" class="form-login">\n      <input type="email" name="email-login" id="email-login"  class="email-login" placeholder="tucorreo@correo.com" value="" >\n      <input type="password" name="password-login" id="password-login" class="password-login" placeholder="contraseña" value="" >\n        <h4>Puedes hacer login manual o puedes acceder con tu cuenta de Google</h4>\n          \x3c!-- Botón switch login --\x3e\n      <div class="container-boton">\n        <div class="switch">\n          <input type="radio" class="switch-input" name="view" value="" id="login" checked>\n          <label for="login" class="switch-label switch-label-off">login</label>\n          <input type="radio" class="switch-input" name="view" value="" id="google-btn">\n          <label for="google-btn" class="switch-label switch-label-on">\n            <img class="logo-google" src="./Assets/imagenes/flat-color-icons_google.svg" alt="google">\n          </label>\n          <span class="switch-selection"></span>\n        </div>\n      </div>\n    </form>\n    <p class="registrate">¿No tienes cuenta? Entonces <a href="#/registro">regístrate</a> y comienza a disfrutar de una vida natural.</p>\n  </div>\n    ';e.querySelector("#login").addEventListener("click",(()=>{(0,o.logInOnSubmit)()}));return e.querySelector("#google-btn").addEventListener("click",o.loginWithGoogle),e};var r={};Object.defineProperty(r,"__esModule",{value:!0}),r.registro=void 0;r.registro=()=>{const e=document.createElement("section");e.innerHTML='\n  <div class="portada-header-container">\n  <h1 class="portada-titulo">Naturópolis</h1>\n  <p class="portada-texto">\n        ¡Bienvenida! Regístrate para acceder a tu muro.\n      </p>\n      <img src="../Assets/imagenes/Naturopolis-logo-portada.svg" alt="logo" class="logo-portada">\n    </div>\n  <div class="formulario-registro-container" id="formulario-registro-container">\n  <h2 class="registro-titulo">Regístrate</h2>\n    <form action="#" method="post" id="form-registro" class="form-registro">\n      <input type="email" name="email-registro" id="email-registro"  class="email" placeholder="tucorreo@correo.com" value="">\n      <input type="text" name="nombre-usuario" id="nombre-usuario"  class="email" placeholder="Marie Veggie" value="">\n      <input type="password" name="password-registro" id="password-registro" class="password" placeholder="contraseña" value="">\n        <h4>Puedes hacer registro manual o puedes acceder con tu cuenta de Google</h4>\n        \n          \x3c!-- Botón switch registro --\x3e\n      <div class="container-boton">\n        <div class="switch">\n          <input type="radio" class="switch-input" name="view" id="registro">\n          <label for="registro" class="switch-label switch-label-off">registro</label>\n          <input type="radio" class="switch-input" name="view" value="google-btn" id="google-btn" checked>\n          <label for="google-btn" class="switch-label switch-label-on">\n            <img class="logo-google" src="./Assets/imagenes/flat-color-icons_google.svg" alt="google">\n          </label>\n          <span class="switch-selection"></span>\n        </div>\n      </div>\n    </form>\n    <p class="registrate">¿ya tienes cuenta? Entonces <a href="#/">haz login</a> y comienza a disfrutar de una vida natural.</p>\n  </div>\n  ';e.querySelector("#registro").addEventListener("click",(()=>{(0,o.signInOnSubmit)()}));return e.querySelector("#google-btn").addEventListener("click",o.loginWithGoogle),e};var i={};Object.defineProperty(i,"__esModule",{value:!0}),i.error=void 0;i.error=()=>{const e=document.createElement("section");return e.innerHTML=' \n    <div class="error-header-container"> \n    <h1 class="error-titulo">Naturópolis</h1>\n    <h3 class="error-texto">\n      ¡UPS! Esta página no existe aún, estamos trabajado en ella.\n    </h3>\n    <br></br>\n    <img src="../Assets/imagenes/Naturopolis-logo portada.svg" alt="logo" class="logo-portada">\n    <p class="error">Puedes volver al <a id="inicio-link" href="#/">inicio</a> y comienza a disfrutar de una vida natural.</p>\n    </div>\n    ',e};var l={};Object.defineProperty(l,"__esModule",{value:!0}),l.muro=void 0;var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.notas=void 0;c.notas=()=>{const e=document.createElement("section");return e.className="user-post-container",(0,o.feedUpdate)((t=>{const a=firebase.auth().currentUser.email;e.innerHTML="",t.forEach((t=>{let o=t.data();e.innerHTML+=`<div class="post-container">\n          <div class="user-info">\n          <img src="../Assets/imagenes/Avatar.svg" alt="avatar" class="img-avatar">\n          <p class="user-name">${o.user}</p>\n        </div>\n\n        <div class="post-texto-container">\n          <div class="post-texto">\n            <p>${o.textNewNote}</p>\n          </div>  \n\n\n\n        <div class="nav-vertical">\n        <a href="" class="likes" id="likes" ><img  src="../Assets/imagenes/likes.svg" alt="likes"></a>\n        <a href="" class="comments" id="comments"><img  src="../Assets/imagenes/comments.svg" alt="comments"></a>\n        \n        </div>\n      </div> \n\n\n        `,o.email===a&&(e.innerHTML+=`\n        <div class="nav-post">\n        <button class="btn-editar" id="editarPost" value="${t.id}" data-post="${o.textNewNote}" >editar</button>\n        <button class="btn-borrar" data-id="${t.id}" id="btn-borrar">borrar</button>\n        </div>\n        `)}));e.querySelectorAll(".btn-borrar").forEach((e=>e.addEventListener("click",(async e=>{try{await(0,o.deletePost)(e.target.dataset.id)}catch(e){console.log(e)}}))));document.querySelectorAll(".btn-editar").forEach((e=>{console.log(e);const t=e.dataset.post;console.log(e.dataset,t),console.log(t),e.addEventListener("click",(()=>{n(e.value,t)}))}));const n=(e,t)=>{const o=firebase.firestore(),a=prompt("Ingresa el nuevo texto",t);return 0===a.trim().length&&alert("Rellena el campo solicitado"),o.collection("notes").doc(e).update({textNewNote:a}).then((()=>{console.log("Exito")})).catch((e=>{console.log(a),console.error("Error: ",e)}))}})),e};l.muro=()=>{const e=document.createElement("section"),t=firebase.auth().currentUser;e.className="muro";const a=`\n  <header class="header-container" id="header-container">\n    <img src="../Assets/imagenes/Naturopolis-logo-muro.svg" alt="logo" class="logo">\n    <h1 id="titulo-header" class="titulo-header">\n      Naturópolis\n    </h1>\n    <button class="btn-signOut"id="btn-signOut">\n      <img src="../Assets/imagenes/Frame-icono-logOut.svg" alt="logOut" class="botón-logOut">\n    </button>\n  </header>\n  <section class="perfil-usuario" id="perfil-usuario">\n    <img src="${t.photoURL}" alt="" class="avatar-usuario">\n    <h3 class="nombre-usuario-perfil" id="nombre-usuario">${t.displayName}</h3>\n  </section>\n\n\n  <section class="crear-post" id="section-post">\n    <form class="form" id="form">\n      <textarea name="" id="texto-input" class="texto-input" wrap="hard" maxlength="500" >\n    \n      </textarea>\n      <button type="submit" class="btn-send" id="btn-send">\n        <img src="../Assets/imagenes/send.svg" alt="send">\n      </button>\n    </form>\n  </section>\n  `;e.innerHTML=a;e.querySelector("#btn-signOut").addEventListener("click",(()=>{(0,o.signOutSubmit)()}));const n=e.querySelector("#form");n.addEventListener("submit",(t=>{t.preventDefault();const a=e.querySelector("#texto-input");console.log(a.value),(0,o.addNoteOnSubmit)(a.value),n.reset()}));const s=e.querySelector("#section-post");return e.insertBefore((0,c.notas)(),s),e};e.cambioRuta=e=>"#/"===e||"#/registro"===e||"#/home"===e?d(e):void 0;const d=e=>{const o=document.getElementById("root");switch(o.innerHTML="",e){case"#/":o.appendChild((0,t.portadaLogin)());break;case"#/registro":o.appendChild((0,r.registro)());break;case"#/home":o.appendChild((0,l.muro)());break;default:o.appendChild((0,i.error)())}};firebase.auth().onAuthStateChanged((e=>{e?(0,o.changeHash)("/home"):(0,o.changeHash)("#/")}));window.addEventListener("load",(()=>{window.addEventListener("hashchange",(()=>{(0,e.cambioRuta)(window.location.hash)}))}));
//# sourceMappingURL=index.7bd54d85.js.map
